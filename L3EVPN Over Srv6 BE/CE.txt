Step 1: Configure Interfaces
Description: This step sets up the CE device's interfaces. The interface connecting to the PE router is configured with an IPv4 address to establish the link. A Loopback interface is also configured to represent the customer's local network, which will be advertised to the provider network.

JSON Example:

JSON

{
  "interfaces": {
    "Loopback1": {
      "description": "Represents the customer's local site network",
      "ip_address": {
        "address": "${loopback_ipv4_address}",
        "mask": "${loopback_ipv4_mask}"
      }
    },
    "${pe_interface_name}": {
      "description": "Interface connecting to the PE router",
      "ip_address": {
        "address": "${pe_interface_ipv4_address}",
        "mask": "${pe_interface_ipv4_mask}"
      }
    }
  }
}
Step 2: Configure BGP
Description: BGP is configured to establish a peering relationship with the provider's PE router. The CE device advertises its local network prefixes to the provider. This can be done by explicitly defining networks with the network command or by applying a configurable route import policy (e.g., direct, static, or none) to automatically inject routes into BGP.

JSON Example:

JSON

{
  "routing": {
    "bgp": {
      "as_number": "${bgp_as_number}",
      "peer": {
        "address": "${pe_peer_address}",
        "remote_as": "${pe_as_number}"
      },
      "networks_to_advertise": [
        {
          "address": "${loopback_ipv4_address}",
          "mask": "${loopback_ipv4_mask}"
        }
      ],
      "import_rules": [
          {
            "type": "${route_import_type}"
          }
      ]
    }
  }
}